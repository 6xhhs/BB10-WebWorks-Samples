/* Copyright 2012 Research In Motion Limited.;
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.License
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(function(a){a.widget("mobile.actionbar",a.mobile.widget,{options:{initSelector:":#action-bar-area",backButtonText:null,showOverflow:!1,disableTapToggle:!0,crossCutMenuOptions:[]},_init:function(){},_create:function(){var b=this,c=a(b.element),d=b.options,e=a(document.createElement("div")),f={},g=a(document.createElement("div")),h={},i=[],j;i=a(":jqmData(role='action')"),a("[data-role=footer]").fixedtoolbar({tapToggle:!d.disableTapToggle}),e.addClass("action-bar");if(d.backButtonText){var k=a(document.createElement("div")),l=a(document.createElement("img")),m=a(document.createElement("div"));k.addClass("action-bar-back action-bar-back-offset-right"),l.addClass("action-bar-back-image").attr("src","../plugins/actionbar/assets/core_actionbar_icon_back.png").appendTo(k),m.addClass("action-bar-back-text").html("Back"),k.append(m),e.append(k)}g.addClass("action-bar-actions"),d.backButtonText||g.addClass("action-bar-actions-full-width");if(!i||i.length<1){var n=a(document.createElement("div"));n.addClass("action-bar-action-item"),g.append(n)}var o;for(o=0;o<i.length;o++){var p=a(i[o]).addClass("action-bar-action-item");if(o>=3){p.addClass("hidden"),d.showOverflow=!0;continue}var q={label:p.find("p").first()},r=p.find("img").first().addClass("action-bar-action-item-image");p.append(r);if(q.label)var s=a(document.createElement("div")).addClass("action-bar-action-item-text").html(q.label).appendTo(p);i[o].disabled&&p.addClass("action-bar-action-item-disabled"),h[i[o].action]=p,g.append(p)}if(d.showOverflow){j=a(document.createElement("div")).addClass("action-bar-actions-overflow").bind("vclick",function(){a("#crosscutMenu").crosscutmenu("show")});if(d.showOverflow){var t=a(document.createElement("img")).attr("src","../plugins/actionbar/assets/core_actionbar_icon_actionoverflow.png");j.append(t)}g.append(j)}e.append(g),c.append(e),a(document).bind("actionbarIn",function(){b._animateIn(k,g)}),a(document).bind("actionbarOut",function(){b._animateOut(k,g)})},refresh:function(){},_animateIn:function(a,b){a&&a.removeClass("action-bar-back-offset-right action-bar-back-offset-left"),b.removeClass("action-bar-actions-offset-right action-bar-actions-offset-left")},_animateOut:function(a,b,c,d){a&&a.addClass("action-bar-back-offset-right"),b.addClass("action-bar-actions-offset-right"),d&&b.on("webkitTransitionEnd",function e(){b.off("webkitTransitionEnd",e),d()})},_animateBelow:function(a,b){a&&a.addClass("action-bar-back-offset-left"),b.addClass("action-bar-actions-offset-left")}}),a(document).bind("pagecreate create",function(b){a.mobile.actionbar.prototype.enhanceWithin(b.target)})})(jQuery),function(a){a.widget("mobile.gridview",a.mobile.widget,{options:{initSelector:":jqmData(role='gridview')"},_create:function(){var a=this;a.element.addClass(function(a,b){return b+" ui-gridview "}),a.refresh(!0)},_getChildrenByTagName:function(b,c,d){var e=[],f={};f[c]=f[d]=!0,b=b.firstChild;while(b)f[b.nodeName]&&e.push(b),b=b.nextSibling;return a(e)},refresh:function(){function k(a){return g*a}this.parentPage=this.element.closest(".ui-page");var b=this,c=b.options,d=this.element,e=this._getChildrenByTagName(d[0],"div","DIV"),f=window.innerWidth||a(window).width(),g=0,h={},i,j;for(var l=0,m=e.length;l<m;l++){i=e.eq(l),j="ui-grid-li";if(i.jqmData("role")==="list-divider")j+=" ui-li ui-li-divider ui-bar-b",i.attr("role","heading");else{var n=this._getChildrenByTagName(i[0],"div","DIV");g=f/n.length;var o=n.find("p").addClass("ui-grid-item-details").width(g).css("left",k).end().find("img").width(g)}h[j]||(h[j]=[]),h[j].push(i[0])}for(j in h)a(h[j]).addClass(j).children(".ui-btn-inner").addClass(j);d.find("h1, h2, h3, h4, h5, h6").addClass("ui-li-heading"),d.find("a").removeClass("ui-link").addClass("ui-link-inherit")}}),a(document).bind("pagecreate create",function(b){a.mobile.gridview.prototype.enhanceWithin(b.target)})}(jQuery),function(a,b){function g(a){a.stopPropagation()}function h(){c=!0,d=!0}function i(){e&&f(),c=!1}function j(){e=!e}var c=!0,d=!1,e=!1,f=function(){a("#crosscutMenu").crosscutmenu("hide")};a.widget("mobile.crosscutmenu",a.mobile.widget,{options:{initSelector:"#crosscutMenu",menuItems:[{name:"My option 1","function":function(){}},{name:"My option 2","function":function(){}},{name:"My option 3","function":function(){}},{name:"My option 4","function":function(){}}]},_init:function(){a("#crosscutMenu").bind("webkitTransitionEnd",j).bind("vclick",g),a(document).bind("touchstart",h).bind("vclick",i)},_create:function(){var b=this,c=b.element,d=b.options,e=a("#crosscutMenuContent");for(var f=0;f<d.menuItems.length;f++){var g=a(document.createElement("div")),h=d.menuItems[f]["function"],i=a(document.createElement("img"));i.attr("src",d.menuItems[f].imageUrl?d.menuItems[f].imageUrl:"../plugins/crossCutMenu/assets/generic_81_81_placeholder.png").addClass("menuImage").appendTo(g),g.append(document.createTextNode(d.menuItems[f].name)).addClass("menuItem light-text-fade").bind("ontouchend vclick",h.bind(this,g)).appendTo(e)}},refresh:function(){},show:function(){a("#crosscutMenu").removeClass("hideMenu").addClass("showMenu")},hide:function(){a("#crosscutMenu").removeClass("showMenu").addClass("hideMenu")},myfunction:function(){}}),a(document).bind("pagecreate create",function(b){a.mobile.crosscutmenu.prototype.enhanceWithin(b.target)})}(jQuery,this),function(a){a.widget("mobile.progressbar",a.mobile.widget,{options:{initSelector:"progress",color:"dark",highlightColor:"#00BC9F",accentColor:"rgb(-120, 68, 39)"},_create:function(){var b=this;this.progress=this.element.css("display","none"),this.outerElement=a(document.createElement("div")).attr("class","bb-progress").insertBefore(this.progress).append(this.progress),this.outer=a(document.createElement("div")).attr("class","outer bb-progress-outer-"+this.options.color+" bb-progress-outer-idle-background-"+this.options.color).appendTo(this.outerElement),this.fill=a(document.createElement("div")).attr("class","bb-progress-fill bb10Highlight").appendTo(this.outer),this.inner=a(document.createElement("div")).attr("class","inner").appendTo(this.outer),this.outerElement.maxValue=this.progress.attr("max")?parseInt(this.progress.attr("max"),10):0,this.outerElement.value=this.progress.attr("value")?parseInt(this.progress.attr("value"),10):0},refresh:function(){},pause:function(a){var b=a!==undefined?a:!0;b?this.fill.addClass("paused"):this.fill.removeClass("paused")},setError:function(a){var b=a!==undefined?a:!0;b?this.fill.addClass("error"):this.fill.removeClass("error")},setValue:function(a){var b=0,c,d;if(a&&a<0||a&&a>parseInt(this.outerElement.maxValue,10))return;a?(this.outerElement.value=a,this.value=a):a===0?(this.outerElement.value=0,this.value=0):a=parseInt(this.outerElement.value,10),a===this.outerElement.maxValue?(b=1,this.fill.addClass("completed").removeClass("active paused error")):a===0?this.outer.attr("class","outer bb-progress-outer-"+this.options.color+" bb-progress-outer-idle-background-"+this.options.color):(this.outer.attr("class","outer bb-progress-outer-"+this.options.color),this.fill.attr("class","bb-progress-fill bb10Highlight").css("background",""),this.fill.addClass("active").removeClass("completed paused error"),b=this.outerElement.value/parseInt(this.outerElement.maxValue,10)),d=Math.floor(parseInt(this.outer.css("width"),10)*b),this.fill.css("width",d+"px"),this.inner.css("-webkit-transform","translate3d("+d+"px,0px,0px)")}}),a(document).bind("pagecreate create",function(b){a.mobile.progressbar.prototype.enhanceWithin(b.target)})}(jQuery);